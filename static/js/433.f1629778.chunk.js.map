{"version":3,"file":"static/js/433.f1629778.chunk.js","mappings":"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","sources":["webpack://sn-ts/./src/Components/Users/Users.module.css?d486","webpack://sn-ts/./src/Components/common/Pagination/Pagination.module.css?4570","Components/common/Pagination/Pagination.tsx","webpack://sn-ts/./src/Components/Users/User/User.module.css?19b8","Components/Users/User/User.tsx","Components/Users/SearchForm/SearchForm.tsx","Components/Users/Users.tsx","Components/Users/UsersContainer.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"header\":\"Users_header__9O-uH\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Pagination_wrapper__QiMfS\",\"arrow\":\"Pagination_arrow__g6g3a\",\"item\":\"Pagination_item__IqgaY\",\"active\":\"Pagination_active__pzjZM\"};","import React, {useState} from 'react';\r\nimport s from './Pagination.module.css';\r\nimport arrowLeft from '../../../Assets/images/arrowLeftBlue.png'\r\nimport arrowRight from '../../../Assets/images/arrowRightBlue.png'\r\n\r\ntype PaginationType = {\r\n    totalItemsCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    portionSize: number\r\n\r\n}\r\n\r\nexport const Pagination: React.FC<PaginationType> =\r\n    ({totalItemsCount, pageSize, currentPage, onPageChanged, portionSize}) => {\r\n\r\n        let pagesCount = Math.ceil(totalItemsCount / pageSize)\r\n\r\n        // let pages = [...Array(totalPages)].map((_, i) => i + 1)\r\n        let pages = []\r\n        for (let i = 1; i <= pagesCount; i++) {\r\n            pages.push(i)\r\n        }\r\n\r\n        let portionCount = Math.ceil(pagesCount / portionSize)\r\n        let [portionNumber, setPortionNumber] = useState(1)\r\n        let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n        let rightPortionPageNumber = portionNumber * portionSize\r\n\r\n        const bachPortionHandle = () => setPortionNumber(portionNumber - 1);\r\n        const nextPortionHandle = () => setPortionNumber(portionNumber + 1);\r\n        return (\r\n            <div className={s.wrapper}>\r\n                {portionNumber > 1 ?\r\n                    <img src={arrowLeft}\r\n                         className={s.arrow}\r\n                         onClick={bachPortionHandle}\r\n                         alt=\"arrowLeft\"/> : <div className={s.arrow}></div>}\r\n                {pages\r\n                    .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n                    .map((p, i) => {\r\n                        const onClickPageHandle = () => onPageChanged(p);\r\n                        return <span\r\n                            key={i}\r\n                            className={p === currentPage ? s.active : s.item}\r\n                            onClick={p === currentPage ? undefined : onClickPageHandle}>\r\n                            {p}\r\n                        </span>\r\n                    })}\r\n                {portionCount > portionNumber ?\r\n                    <img src={arrowRight}\r\n                         className={s.arrow}\r\n                         onClick={nextPortionHandle}\r\n                         alt=\"arrowRight\"/> : <div className={s.arrow}></div>}\r\n            </div>\r\n        );\r\n    }","// extracted by mini-css-extract-plugin\nexport default {\"block\":\"User_block__a4cKo\",\"blockAva\":\"User_blockAva__efFNi\",\"image\":\"User_image__AcDBh\",\"allInfo\":\"User_allInfo__wfiLj\",\"nameStatus\":\"User_nameStatus__Deruz\",\"location\":\"User_location__5fq+S\"};","import React from 'react';\r\nimport s from './User.module.css';\r\nimport userPhoto from '../../../Assets/images/userPhoto.png';\r\nimport {UserType} from '../../../Redux/users-reducer';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\ntype UsersType = {\r\n    user: UserType\r\n    followArrayId: Array<number>\r\n    postFollowTC: (userId: number) => void\r\n    deleteFollowTC: (userId: number) => void\r\n}\r\n\r\nexport const User: React.FC<UsersType> = (\r\n    {user: u, followArrayId, postFollowTC, deleteFollowTC}) => {\r\n\r\n    return (\r\n        <div key={u.id} className={s.block}>\r\n            <div className={s.blockAva}>\r\n                <NavLink to={`/profile/${u.id}`}>\r\n                    <img\r\n                        src={u.photos.small !== null ? u.photos.small : userPhoto}\r\n                        className={s.image} alt=\"users photo\"/>\r\n                </NavLink>\r\n                {u.followed\r\n                    ? <button disabled={followArrayId.some(el => el === u.id)}\r\n                              onClick={() => deleteFollowTC(u.id)}>unfollow</button>\r\n                    : <button disabled={followArrayId.some(el => el === u.id)}\r\n                              onClick={() => postFollowTC(u.id)}>follow</button>}\r\n            </div>\r\n            <div className={s.allInfo}>\r\n                <div className={s.nameStatus}>\r\n                    <div>{u.name}</div>\r\n                    <div>{u.status}</div>\r\n                </div>\r\n                <div className={s.location}>\r\n                    <div>{'u.location.country'}</div>\r\n                    <div>{'u.location.city'}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {ChangeEvent, MutableRefObject, useEffect, useRef} from 'react';\r\nimport {useAppSelector} from '../../../Redux/redux-store';\r\nimport {\r\n    getIsFetching,\r\n    getPageSize, getUsersTC,\r\n    selectFriendFollowFilter,\r\n    selectTermSearchFilter, setFriendFollowFilter, setTernSearchFilter\r\n} from '../../../Redux/users-reducer';\r\nimport {useDispatch} from 'react-redux';\r\n\r\nexport const SearchForm = () => {\r\n    const termSearchFilter = useAppSelector(selectTermSearchFilter)\r\n    const friendFollowFilter = useAppSelector(selectFriendFollowFilter)\r\n    const pageSize = useAppSelector(getPageSize)\r\n    const isFetching = useAppSelector(getIsFetching)\r\n    const dispatch = useDispatch()\r\n\r\n    const timeoutId = useRef() as MutableRefObject<ReturnType<typeof setTimeout>>;\r\n\r\n    useEffect(() => {\r\n        if (termSearchFilter === '') {\r\n            dispatch(getUsersTC({\r\n                page: 1,\r\n                count: pageSize,\r\n                term: termSearchFilter,\r\n                friend: friendFollowFilter!\r\n            }))\r\n        } else {\r\n            timeoutId.current = setTimeout(() => {\r\n                dispatch(getUsersTC({\r\n                    page: 1,\r\n                    count: pageSize,\r\n                    term: termSearchFilter,\r\n                    friend: friendFollowFilter!\r\n                }))\r\n            }, 500)\r\n        }\r\n        return () => {\r\n            clearTimeout(timeoutId.current);\r\n        }\r\n    }, [termSearchFilter, friendFollowFilter])\r\n\r\n    const onChangeTermHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n        dispatch(setTernSearchFilter(e.currentTarget.value))\r\n    }\r\n\r\n    const onChangeFriendFollow = (e: ChangeEvent<HTMLSelectElement>) => {\r\n        dispatch(setFriendFollowFilter(e.currentTarget.value === 'null' ? null : e.currentTarget.value === 'true'))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <input placeholder={'search users'} type=\"text\"\r\n                   value={termSearchFilter}\r\n                   onChange={onChangeTermHandler}\r\n                   disabled={isFetching}/>\r\n            <select value={String(friendFollowFilter)}\r\n                    onChange={onChangeFriendFollow}\r\n                    disabled={isFetching}\r\n                    name=\"select\" id=\"select\">\r\n                <option value=\"null\">all users</option>\r\n                <option value=\"true\">follow</option>\r\n                <option value=\"false\">unfollow</option>\r\n            </select>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport s from './Users.module.css';\r\nimport {UserType} from '../../Redux/users-reducer';\r\nimport {Pagination} from '../common/Pagination/Pagination';\r\nimport {User} from './User/User';\r\nimport {SearchForm} from './SearchForm/SearchForm';\r\n\r\ntype UsersType = {\r\n    totalCountUsers: number\r\n    pageSize: number\r\n    currentPage: number\r\n    onPageChanged: (pageNumber: number) => void\r\n    users: UserType[]\r\n    followArrayId: Array<number>\r\n    postFollowTC: (userId: number) => void\r\n    deleteFollowTC: (userId: number) => void\r\n}\r\n\r\nexport const Users: React.FC<UsersType> = (\r\n    {\r\n        totalCountUsers, pageSize, currentPage,\r\n        onPageChanged, users, followArrayId, postFollowTC, deleteFollowTC\r\n    }) => {\r\n\r\n    return (\r\n        <div className={s.header}>\r\n            <SearchForm/>\r\n            <Pagination totalItemsCount={totalCountUsers}\r\n                        pageSize={pageSize}\r\n                        currentPage={currentPage}\r\n                        onPageChanged={onPageChanged}\r\n                        portionSize={10}/>\r\n\r\n            {users.length\r\n                ? users.map(u => <User key={u.id}\r\n                                       user={u}\r\n                                       postFollowTC={postFollowTC}\r\n                                       followArrayId={followArrayId}\r\n                                       deleteFollowTC={deleteFollowTC}/>)\r\n                : <span>users not found</span>}\r\n        </div>\r\n    );\r\n}","import React, {ComponentType} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../Redux/redux-store';\r\nimport {\r\n    deleteFollowTC,\r\n    getCurrentPage, getFollowArrayId,\r\n    getIsFetching,\r\n    getPageSize,\r\n    getTotalCountUsers,\r\n    getUsers,\r\n    getUsersTC,\r\n    postFollowTC, selectFriendFollowFilter, selectTermSearchFilter,\r\n    toggleDisabled,\r\n    UserType\r\n} from '../../Redux/users-reducer';\r\nimport {Users} from './Users';\r\nimport {Preloader} from '../common/Preloader/Preloader';\r\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect';\r\nimport {compose} from 'redux';\r\nimport {UsersQueryParams} from '../../API/api';\r\n\r\n\r\nclass UsersContainer extends React.Component<UsersType> {\r\n    // constructor(props: UsersType) {\r\n    //     super(props);\r\n    // } можно не писать, если больше ничего в constructor не делаем(была попытка написать axios), все sideEffects делать в componentDidMount():\r\n\r\n    componentDidMount() {\r\n        let {currentPage, pageSize, getUsersTC, termSearchFilter, friendFollowFilter} = this.props\r\n\r\n        getUsersTC({page: currentPage,count: pageSize, term: termSearchFilter, friend: friendFollowFilter!})\r\n    }\r\n\r\n    onPageChanged = (pageNumber: number) => {\r\n        let {pageSize, getUsersTC, termSearchFilter, friendFollowFilter} = this.props\r\n\r\n        getUsersTC({page: pageNumber,count: pageSize, term: termSearchFilter, friend: friendFollowFilter!})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Preloader isFetching={this.props.isFetching}/>\r\n                <Users onPageChanged={this.onPageChanged} {...this.props}\r\n\r\n                />\r\n            </>)\r\n    }\r\n}\r\n\r\ntype MapStatePropsType = {\r\n    users: Array<UserType>\r\n    pageSize: number\r\n    totalCountUsers: number\r\n    currentPage: number\r\n    isFetching: boolean\r\n    followArrayId: Array<number>\r\n    termSearchFilter: string\r\n    friendFollowFilter: null | boolean,\r\n}\r\ntype MapDispatchPropsType = {\r\n    toggleDisabled: (userId: string, isDisabled: boolean) => void\r\n    getUsersTC: (payload: UsersQueryParams) => void\r\n    postFollowTC: (userId: number) => void\r\n    deleteFollowTC: (userId: number) => void\r\n}\r\n\r\nexport type UsersType = MapStatePropsType & MapDispatchPropsType\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalCountUsers: getTotalCountUsers(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followArrayId: getFollowArrayId(state),\r\n        termSearchFilter: selectTermSearchFilter(state),\r\n        friendFollowFilter: selectFriendFollowFilter(state)\r\n    }\r\n}\r\n\r\nexport default compose<ComponentType>(connect(mapStateToProps,\r\n        {toggleDisabled, getUsersTC, postFollowTC, deleteFollowTC}),\r\n    withAuthRedirect)(UsersContainer)\r\n\r\n"],"names":["Pagination","totalItemsCount","pageSize","currentPage","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","className","s","src","arrowLeft","onClick","alt","filter","p","map","undefined","arrowRight","User","u","user","followArrayId","postFollowTC","deleteFollowTC","to","id","photos","small","userPhoto","followed","disabled","some","el","name","status","SearchForm","termSearchFilter","useAppSelector","selectTermSearchFilter","friendFollowFilter","selectFriendFollowFilter","getPageSize","isFetching","getIsFetching","dispatch","useDispatch","timeoutId","useRef","useEffect","getUsersTC","page","count","term","friend","current","setTimeout","clearTimeout","placeholder","type","value","onChange","e","setTernSearchFilter","currentTarget","String","setFriendFollowFilter","Users","totalCountUsers","users","length","UsersContainer","pageNumber","props","this","Preloader","React","compose","connect","state","getUsers","getTotalCountUsers","getCurrentPage","getFollowArrayId","toggleDisabled","withAuthRedirect"],"sourceRoot":""}